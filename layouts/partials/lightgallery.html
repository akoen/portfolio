<!-- Responsive gallery partial.

     Example (remove /* */ in template):

     {{/* partial "gallery.html" (dict
     "context" .
     "photos" (first 16 (sort (resources.Match "images/**.{jpeg,h264.mp4}") "Name" "desc")))  */}}

     where CONTEXT is the site context (always .) and PHOTOS is an array of media
     resources in .jpeg or mp4 format.

     must define site params:
     .params.imageThumbQuality
     .params.imageResponsiveWidths

     AUTHOR: Alex Koen
-->

<div id="gallery">
  {{ range $file := .photos }}
    {{ if (eq $file.ResourceType "image") }}
      <!-- IMAGES -->
      {{ $img := $file.Resize "x1024 q90"}}
      {{ $thumb := $img.Fill $.context.Site.Params.imageThumbQuality }}
      {{ $srcset := (partial "srcset.html" $img) }}

      <a class="gallery__item"
         href="{{ $srcset.src }}"
         data-slide-name="{{ .Name | md5 }}"
         data-srcset="{{ $srcset.srcset }}"
         data-sizes="100vw"
      >
        <img class="lazy gallery__item__img"
             data-src="{{ $thumb.Permalink }}"
        >
      </a>
    {{ end  }}
  {{ end  }}
</div>
