
{{/* hugo will resize to all of these widths that are smaller than your original. configure if you like! */}}
{{/* $widths := [480, 800, 1200, 1500] */}}

{{ $img := .img }}
{{ $widths := $.ctx.Site.Params.landscapePhotoWidths }}


{{ $imgSrcSet := slice }}
{{ $imgSrc := "" }}
{{ $imgSrcPair := "" }}
{{ range $widths }}
  {{ $srcUrl := (printf "%dx" . | $img.Resize).RelPermalink }}
  {{ $imgSrcPair = (printf "%s %dw" $srcUrl .) }}
  {{ $imgSrcSet = (append $imgSrcPair $imgSrcSet) }}
  <!-- Make the image url the smallest of the generated images -->
  {{ if eq $imgSrc "" }}{{ $imgSrc = $srcUrl }}{{ end }}
{{ end }}
{{ $imgSrcSet = (delimit $imgSrcSet ",") }}


<figure >
  <img
    class="lazy"
    widths="(min-width: 35em) 1200px, 100vw"
    data-src="{{ $imgSrc }}"
    data-srcset="{{ $imgSrcSet }}"
  />
</figure>
